(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{1886:(t,e,a)=>{"use strict";a.d(e,{FF:()=>l,GW:()=>r,Iy:()=>i,p4:()=>s});var n=a(3464);let o=a(1890).env.NEXT_PUBLIC_NOTEHUB_TOKEN;async function r(t,e,a){let o={page:e,perPage:12};return t&&(o.search=t),a&&(o.tag=a),(await n.A.get("/notes",{params:o})).data}async function s(t){let{title:e,content:a,tag:o}=t;return(await n.A.post("/notes",{title:e,content:a,tag:o})).data}async function i(t){return(await n.A.delete("/notes/".concat(t))).data}async function l(t){return(await n.A.get("/notes/".concat(t))).data}n.A.defaults.baseURL="https://notehub-public.goit.study/api",n.A.defaults.headers.common.Authorization="Bearer ".concat(o)},2188:(t,e,a)=>{"use strict";a.d(e,{A:()=>s});var n=a(5155),o=a(7618),r=a.n(o);function s(){return(0,n.jsx)("p",{className:r().text,children:"There was an error, please try again..."})}},4636:(t,e,a)=>{"use strict";a.d(e,{default:()=>g});var n=a(5155),o=a(7692),r=a.n(o),s=a(6715),i=a(5041),l=a(1886),c=a(2188),u=a(5695),d=a(7129),m=a(2115),_=a(5453),h=a(6786);let p={title:"",content:"",tag:"Todo"},f=(0,_.v)()((0,h.Zr)(t=>({draft:p,setDraft:e=>{t(()=>({draft:e}))},clearDraft:()=>{t(()=>({draft:p}))}}),{name:"note-draft",partialize:t=>({draft:t.draft})})),x=d.Ik().shape({title:d.Yj().required("Title is required").min(3,"Title must be at least 3 characters").max(50,"Title is too long"),content:d.Yj().max(500,"Content is too long"),tag:d.Yj().oneOf(["Todo","Work","Personal","Meeting","Shopping"],"Invalid tag value").required("Tag is required")});function g(){let t=(0,u.useRouter)(),e=(0,s.useQueryClient)(),[a,o]=(0,m.useState)(null),{draft:_,setDraft:h,clearDraft:p}=f(),g=(0,i.useMutation)({mutationFn:async t=>(0,l.p4)(t),onSuccess:()=>{e.invalidateQueries({queryKey:["notes"],exact:!1}),p(),b()}}),{isPending:N,isError:v}=g;function j(t){h({..._,[t.target.name]:t.target.value})}function b(){t.push("/notes/filter/all")}async function y(t){try{return await x.validate(t,{abortEarly:!1}),null}catch(t){if(t instanceof d.yI)return t.errors[0];return"Unknown validation error"}}async function C(t){let e=Object.fromEntries(t),a={title:e.title,tag:e.tag,content:e.content?e.content:void 0},n=await y(a);if(n)return void o(n);o(null),g.mutate(a)}return(0,n.jsxs)("form",{className:r().form,action:C,children:[(0,n.jsxs)("div",{className:r().formGroup,children:[(0,n.jsx)("label",{htmlFor:"title",children:"Title"}),(0,n.jsx)("input",{id:"title",type:"text",name:"title",className:r().input,defaultValue:_.title,onChange:j})]}),(0,n.jsxs)("div",{className:r().formGroup,children:[(0,n.jsx)("label",{htmlFor:"content",children:"Content"}),(0,n.jsx)("textarea",{id:"content",name:"content",rows:8,className:r().textarea,defaultValue:_.content,onChange:j})]}),(0,n.jsxs)("div",{className:r().formGroup,children:[(0,n.jsx)("label",{htmlFor:"tag",children:"Tag"}),(0,n.jsxs)("select",{id:"tag",name:"tag",className:r().select,defaultValue:_.tag,onChange:j,children:[(0,n.jsx)("option",{value:"Todo",children:"Todo"}),(0,n.jsx)("option",{value:"Work",children:"Work"}),(0,n.jsx)("option",{value:"Personal",children:"Personal"}),(0,n.jsx)("option",{value:"Meeting",children:"Meeting"}),(0,n.jsx)("option",{value:"Shopping",children:"Shopping"})]})]}),a&&(0,n.jsx)("span",{className:r().error,children:a}),(0,n.jsxs)("div",{className:r().actions,children:[(0,n.jsx)("button",{type:"button",className:r().cancelButton,onClick:b,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:r().submitButton,disabled:!!N,children:N?"Loading":"Create note "})]}),v&&(0,n.jsx)(c.A,{})]})}},6728:t=>{t.exports={main:"CreateNote_main__wIxhv",container:"CreateNote_container__gLSDT",title:"CreateNote_title__tklUI"}},7074:(t,e,a)=>{Promise.resolve().then(a.t.bind(a,6728,23)),Promise.resolve().then(a.bind(a,4636))},7618:t=>{t.exports={text:"ErrorMessage_text__vJQtc"}},7692:t=>{t.exports={form:"NoteForm_form__kBK_0",formGroup:"NoteForm_formGroup__bS5ba",input:"NoteForm_input__28hgd",textarea:"NoteForm_textarea__kzing",select:"NoteForm_select__Go8Rq",actions:"NoteForm_actions__aG_Xr",submitButton:"NoteForm_submitButton__vSvUI",cancelButton:"NoteForm_cancelButton__c33li",error:"NoteForm_error__swtoj"}}},t=>{var e=e=>t(t.s=e);t.O(0,[949,144,178,738,441,684,358],()=>e(7074)),_N_E=t.O()}]);